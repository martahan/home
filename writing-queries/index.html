<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>VyPR - Performance Analysis for Python Programs</title>

    <!-- Bootstrap -->
    <link href="../static/css/bootstrap.min.css" rel="stylesheet" />

    <link href="../static/css/custom.css" rel="stylesheet" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../static/js/bootstrap.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  	<nav class="navbar navbar">
  	  <div class="container-fluid">
  	    <!-- Brand and toggle get grouped for better mobile display -->
  	    <div class="navbar-header">
          <a class="navbar-brand" href="../index.html"><img src="../static/images/vypr_logo.jpeg" height="50px" margin-top="-10px" /></a>
        </div>

  	    <!-- nav links -->
  	    <div class="collapse navbar-collapse" id="navbar">
  	      <ul class="nav navbar-nav">
  	        <!--<li><a href="tutorial.html">Tutorial</a></li>-->
            <li><a href="../use-vypr.html">Get Started with VyPR</a></li>
            <li><a href="../publications.html">Research</a></li>
            <li><a href="../team.html">Team</a></li>
            <li><a href="../licence.html">Licence</a></li>
  	      </ul>
  	    </div><!-- /.navbar-collapse -->
  	  </div><!-- /.container-fluid -->
  	</nav>

	<div class="container">
    <nav>
      <ul class="pager">
        <li><a href="../use-vypr.html">Getting Started with VyPR</a></li>
        <li><a href="index.html">Writing Queries</a></li>
        <li><a href="../analysis-environment/index.html">Web-based Analysis Environment</a></li>
        <li><a href="../analysis-library/index.html">Python Analysis Library</a></li>
      </ul>
    </nav>

    <div class="container">
      <h1>Writing Queries for VyPR</h1><br />
      <div class="col-md-3">
        <ul class="nav nav-pills nav-stacked">
          <li role="presentation" class="active"><a href="index.html">Introduction</a></li>
          <li role="presentation"><a href="defining-constraints.html">Defining Constraints</a></li>
          <li role="presentation"><a href="selecting-points-of-interest.html">Selecting Points of Interest</a></li>
          <li role="presentation"><a href="reference.html">Reference</a></li>
        </ul>
      </div>
      <div class="col-md-8">
      <p>The general idea of VyPR is that the developer writes queries over specific functions in a Python program.  These queries take the form of properties that should hold at runtime.  VyPR decides at runtime whether these properties are satisfied.  The results of the queries are given in the form of data describing the satisfaction by the program of the properties.</p>
    <p>Queries are written in a central file called <b>VyPR_queries.py</b> in the root of a project's directory structure.  This file is written in Python using VyPR's query building library as such:</p>
<pre>
verification_conf = {
  "package.module" : {
    "class.method" : [
      Forall(
        q = changes('x')
      ).Check(
        lambda q : (
          q.next_call('g').duration() <= 0.1
        )
      )
    ]# class.method
  }# package.module
}# verification_conf
</pre>

      <h3>The Structure of a Query</h3>

      <p>In order to tell VyPR where to apply instrumentation and subsequently query at runtime, you need to give the path to each function that you want to monitor.</p>
      <p>In the query above, the first level strings tell VyPR which module to look inside and the second level strings tell VyPR which function inside that module.</p>

      <p>In order to write a query, you should:</p>
      <ul>
        <li>Define the property to check.</li>
        <li>Select the points in the program at which the property will be checked.</li>
      </ul>
      </div>
    </div>
  </div>

  <div class="footer-copyright text-center py-3">
    <p>(C) Copyright 2020 CERN and University of Manchester.</p>
  </div>
  
  </body>
</html>